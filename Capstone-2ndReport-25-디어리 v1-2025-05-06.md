<!-- Template for PROJECT REPORT of CapstoneDesign 2025-2H, initially written by khyoo -->
<!-- 본 파일은 2025년도 컴공 졸업프로젝트의 <1차보고서> 작성을 위한 기본 양식입니다. -->
<!-- 아래에 "*"..."*" 표시는 italic체로 출력하기 위해서 사용한 것입니다. -->
<!-- "내용"에 해당하는 부분을 지우고, 여러분 과제의 내용을 작성해 주세요. -->

# Team-Info
| (1) 과제명 | 책을 읽지 않고 빠르게 교양을 얻고 싶은 사용자를 위한 openAI 활용 퀴즈 서비스
|:---  |---  |
| (2) 팀 번호 / 팀 이름 | 25-디어리 |
| (3) 팀 구성원 | 황보혜 (2271066): 리더, BE, ERD 설계 및 데이터베이스 구축 <br> 이윤서 (2271048) : 팀원, BE, Django API 개발 <br> 박신양 (2271027): 팀원, FE, Flutter 기반 UI 설계 및 구현 |
| (4) 팀 지도교수 | 오세은 교수님 |
| (5) 과제 분류 | 산학과제 |
| (6) 과제 키워드 | 퀴즈봇, 프롬프트 엔지니어링, 교양 지식 |
| (7) 과제 내용 요약 | 본 과제의 주요 대상은 책을 읽지 않지만 교양 지식에 대한 욕구가 있는 성인이며, 이들을 위한 교양 퀴즈봇 시스템을 개발하는 것을 목표로 한다. <br> 최근 숏폼 소비가 증가하면서 짧은 시간에 정보를 얻는 데 익숙해진 이들이 많아졌다. 이는 집중력과 문해력 저하로 이어져 독서를 통한 지식 습득에 어려움을 겪는 사례가 늘고 있다. 이러한 문제를 해결하기 위해 책이 아닌 아티클 기반의 짧고 간편한 학습 경험을 모바일로 제공하고자 한다. <br> OpenAI와 Custom Search JSON API를 이용해 사용자가 입력한 키워드를 기반으로 적절한 아티클을 추천하고, 해당 콘텐츠로부터 자동 생성된 퀴즈를 제공한다. 이를 통해 사용자는 스스로 선택한 관심 주제에 따라 교양 지식을 쌓고 성취감을 얻을 수 있다. 또한 Django Channels를 활용한 실시간 사용자 간 퀴즈 배틀 기능을 구현 중이며, 추후 랭킹 시스템 도입을 통해 지속적인 참여와 학습 동기를 부여할 예정이다.

<br>

# Project-Summary
| 항목 | 내용 |
|:---  |---  |
| (1) 문제 정의 | 최근 책을 읽지 않고도 교양을 쌓고자 하는 성인 비독서자들이 증가하고 있다. 이들은 SNS를 통해 자신의 지식을 드러내고자 하는 욕구가 높지만, 유튜브, 틱톡 등의 숏폼 시청이 일상화 되면서 집중력과 문해력이 저하되어 독서를 통한 지식 습득에 어려움을 느끼고 있다. 또한 책보다 영상 매체를 선호하여 빠르게 정보를 습득하는 것에 익숙하다. 이로 인해 교양과 상식에 관심이 있음에도 불구하고 독서에 진입장벽을 느끼고 있다. 이들은 많은 시간이 필요한 전통적인 독서보다 짧고 간편한 방식을 통해 교양 지식을 얻길 원한다. 이에 따라, 관심 분야에 대해 빠르고 간단하게 교양 지식을 얻을 수 있는 학습 형태가 필요하다. |
| (2) 기존연구와의 비교 | 아직까지 openAI를 사용하여 사용자 맞춤 퀴즈를 제공하는 서비스는 시중에 존재하지 않는다. “상식 퀴즈”는 사용자의 상식을 증진시킬 수 있는 퀴즈 앱으로 사용자가 특정 분야를 선택할 수 없고 오직 일반 상식만을 다룬다. “Quiz Planet”의 경우, 대부분의 문제가 간단한 키워드 맞히기, 유명인이 남긴 명언 맞히기와 같은 간단한 객관식으로 장기 사용자가 없으며 심심풀이용으로 잠깐 소비되는 것이 특징인 퀴즈 앱이다. 이렇게 “상식 퀴즈”와 “Quiz Planet”은 정적인 퀴즈 생성 방식으로 앱 사용 방법이 간단하기 때문에 진입장벽이 낮다는 장점을 가지는 한편 사용자의 관심사와 흥미와는 무관한 지식을 다루고 있다는 한계점이 있다. 이에 반해 본 과제가 제안하는 서비스는 사용자가 요청한 분야를 실제로 학습할 수 있다는 점이 큰 장점이다. 또한, 해당 분야에 대한 사전 지식이 없더라도 제공된 아티클을 읽으며 학습할 수 있다는 점과 동적으로 퀴즈를 생성한다는 점에서 단순히 퀴즈만을 제공하는 다른 앱들과 차별성이 있다. 경쟁 모드인 배틀 기능을 활용하여 게임과 같은 재미와 오랫동안 학습할 계기를 제공한다는 점도 우리 서비스의 장점이다. |
| (3) 제안 내용 | 1. 책보다 빠르고 간편하게 접근하여 교양과 상식을 얻을 수 있도록 온라인 서비스를 제공한다. <br> 2. 사용자들이 관심을 가지고 학습을 시작할 수 있도록 사용자가 원하는 분야에 대한 아티클을 제공한다. <br> 3. 사용자의 집중력을 고려하여 15분 내외의 빠른 시간 내에 끝낼 수 있는 학습 서비스를 제공한다. <br> 4. 채팅 형식의 상호작용을 통해 사용자의 학습을 평가하고 올바른 학습 방향성을 제시한다. <br> 5. 학습 동기 부여와 성취감을 위해 배틀 모드, 랭킹 시스템 등의 게이미피케이션 요소를 활용한다. <br> 6. 주기적인 학습을 통해 글을 읽는 습관을 들이고 집중력을 키울 수 있도록 도와준다. |
| (4) 기대효과 및 의의 | 사용자가 원하는 키워드와 관련된 아티클을 읽고 퀴즈를 풂으로써 독서보다 간편하게 교양 지식을 습득할 수 있다. 이를 통해 짧은 영상 매체에 익숙한 비독서자들에게 학습 대안을 제시할 수 있으며, 사용자의 지적 욕구를 효율적으로 충족시킬 수 있다. 장기적으로는 글을 읽는 습관을 들일 수 있도록 함으로써 사용자의 집중력, 문해력 향상에도 도움을 줄 수 있다. 또한 AI 기반 서술형 퀴즈 피드백과 퀴즈 배틀 및 랭킹 시스템을 통한 게이미피케이션 요소는 학습 몰입도를 높이고 반복학습을 유도하여 장기적인 학습을 가능하게 한다는 점에서 교육적 의의가 있다. |
| (5) 주요 기능 리스트  |**1. 안드로이드 어플리케이션** <br> **2. 관심 키워드 기반 아티클 추천**: Instruction-based Prompting과 Custum Search JSON API를 이용하여 사용자가 입력한 키워드와 관련된, 책보다 짧고 핵심 주제가 명확하며 공신력있는 아티클을 제공 <br> **3. 자동 퀴즈 생성과 서술형 퀴즈 피드백**: OpenAI와 Beautiful Soup, 텍스트 분할 함수, 아티클 요약 함수를 통해 사용자에게 퀴즈(객관식 2, 서술형 1)와 모범 답안을 제공 <br>**4. 퀴즈봇**: Django Channels를 이용한 실시간 Websocket 통신을 통해 챗봇 형식의 퀴즈 학습 제공 <br> **5. 실시간 퀴즈 배틀**: Django Channels와 Redis를 이용한 Websocket 통신을 통해 실시간 동접자 배틀 모드를 제공  <br> **6. 랭킹 시스템**: *Django Commands를 사용하여 매달 첫번째 날에 순위 업데이트하고 일일·월별 점수 정보와 순위 정보를 제공* |

<br>
 
# Project-Design & Implementation
| 항목 | 내용 |
|:---  |---  |
| (1) 요구사항 정의 | **기능 명세 (API 중심)** <br> <img src="https://github.com/dear-yy/CapstoneDesignProject/blob/main/image/API_user_and_quiz.png" width="65%" /> <img src="https://github.com/dear-yy/CapstoneDesignProject/blob/main/image/API_battle.png" width="65%" /><img src="https://github.com/dear-yy/CapstoneDesignProject/blob/main/image/API_ranking.png" width="65%"/> <br>***[회원]***<br>*- 회원가입*<br>*사용자 입력 정보를 기반으로 User, Profile 객체 생성 및 Token 발급*<br>*- 로그인*<br>*인증된 User의 Token과 식별 번호 반환*<br>*- 프로필 수정*<br>*사용자 요청 기반으로 Profile 정보 수정*<br>*- 프로필 조회*<br>*원하는 사용자의 Profile 정보 조회*<br>*- 회원 탈퇴*<br>*User와 Profile 객체 삭제*<br>***[퀴즈]***<br>- *퀴즈룸 생성*<br>*Quizroom 객체 생성*<br>- *퀴즈룸 리스트 조회* <br>*현재 진행 중이거나 종료된 Quizroom 리스트 조회*<br>- *퀴즈룸 상세 조회(메시지 내역)*<br>*특정 Quizroom의 채팅형 진행 내역 조회*<br>*- QuizroomConsumer*<br>*채팅형 퀴즈 인터페이스 제공*<br>*- 아티클 생성*<br>*사용자 피드백을 바탕으로 아티클 추천*<br>*- 객관식 퀴즈 생성*<br>*추천 아티클 기반으로 2개의 객관식 문제 생성*<br>*- 서술형 퀴즈 생성*<br>*추천 아티클 기반으로 1개의 서술형 문제 생성*<br>***[경쟁모드]***<br>*- 배틀 매치 대기*<br>*User의 식별 번호를 매칭 대기열에 등록*<br>*- 배틀 매치 현황 조회*<br>*User의 매칭 진행 상태를 성공, 대기, 유효하지 않음으로 확인*<br>*- 배틀 매치 대기 취소*<br>*매칭 대기열에서 요청 User의 식별 번호 삭제*<br>*- 배틀 완료 내역 전체 조회*<br>*완료된 Battleroom 목록 정보를 리스트 형식으로 조회*<br>*- 새 배틀룸 조회*<br>*매칭 성공한 Battleroom을 조회*<br>*- BattleSetupConsumer*<br>*1:1로 매칭된 User들이 동일한 Battleroom을 통해 동일한 BattleArticle과 동일한 BattleQuiz를 생성하여 공유*<br>*- BattleConsumer*<br>*매칭 상대와 동일 퀴즈를 개별로 풀이하고 결과 처리*<br>*- 배틀룸 나가기*<br>*현재 진행 중이거나 완료한 Battleroom에 대해 사용자 종료 처리*<br>*- 배틀룸 결과 조회*<br>*특정 Battleroom의 승패 여부를 포함한 정보 조회*<br>***[랭킹 시스템]***<br>*- 점수 초기화*<br>*전체 User의 Profile의 ranking_score를 0으로 초기화*<br>*- 랭킹 보드 조회*<br>*1~10위 순위 및 본인의 일일 점수와 월별 백분위 정보 조회*<br><br><br> **Entity-Relationship Diagram** <img src="https://github.com/dear-yy/CapstoneDesignProject/blob/main/image/ERD.jpg" width="80%" /> <br>***Profile***: *User 모델을 확장한 모델로 사용자의 프로필 정보를 저장*<br>***User***: *Django에서 제공하는 기본 사용자 모델*<br>***Quizroom***: *사용자가 생성한 퀴즈룸으로 퀴즈 한 세트를 처리하는데 필요한 정보를 포함*<br>***QuizroomMessage***: *Quizroom의 모든 메세지 내역을 저장하는 모델*<br>***UserArticleHistory***: *Quizroom에서 아티클 선정 시 최근 내역 100개 이외의 아티클을 설정하도록 과거 아티클 내역을 저장하는 모델*<br>***Article***: *Quizroom에서 선정된 아티클의 정보와 아티클 선정에 사용된 사용자 입력을 저장하는 모델*<br>***MutipleChoiceQuiz***: *Article 모델의 정보를 기반으로 출제된 객관식 퀴즈 정보를 저장하는 모델*<br>***DescriptiveQuiz***: *Article 모델의 정보를 기반으로 출제된 서술형 퀴즈 정보를 저장하는 모델*<br>***Battleroom***: *두 사용자 매칭으로 생성되는 모델 객체로, 배틀 처리에 필요한 정보를 저장하는 모델*<br>***BattleArticle***: *Battleroom에서 랜덤으로 선정된 아티클의 정보를 저장하는 모델*<br>***BattleQuiz***: *BattleArticle 모델의 정보를 기반으로 출제된 한 사이클의 객관식 & 서술형 퀴즈 정보를 저장하는 모델 (두 사용자에게 공통으로 출제되는 퀴즈 정보)*<br>
| (2) 전체 시스템 구성 | **System Architecture**<br><img src="https://github.com/dear-yy/CapstoneDesignProject/blob/main/image/sw%20%EA%B5%AC%EC%A1%B0%EB%8F%84.jpeg" width="530" /> <br>**주요 SW 모듈 및 역할** <br>Flutter (프론트엔드 앱): 사용자 인터페이스 및 퀴즈 채팅 및 배틀 화면과 랭킹 화면 제공 <br> Django (백엔드 API): 사용자 정보 관리, 퀴즈 생성, 점수 저장, 매칭 시스템 <br> PostgreSQL (DB): 사용자 데이터, 퀴즈 기록, 채팅 내역, 배틀 결과 저장, *article_history를 통해 사용자가 후에 비슷한 주제를 추가 학습할 때 동일한 아티클을 선정하는 것 방지함*<br><br> **오픈소스 사용** <br> Django Rest Framework (DRF): *퀴즈 룸, 배틀 룸, 랭킹 시스템* API 개발 <br> Django Channels: WebSocket 기반 실시간 통신 <br> Custom Search JSON API: 키워드를 이용하여 뉴스, 아티클을 선정 <br><br><img src= "https://github.com/dear-yy/CapstoneDesignProject/blob/main/image/sw%20%EA%B5%AC%EC%A1%B0%20%EC%9E%90%EC%84%B8%ED%95%9C%20%EB%B2%84%EC%A0%84.jpg" width="65%"> <br>*<아티클 추천>*<br>1. *학습하고자 하는 키워드 입력, django channels*<br>2. *사용자 입력 키워드로 검색 키워드 생성, gpt-4o-mini*<br>3. *키워드 기반 아티클 검색, google custom search json api*<br>4. *아티클 스크래핑, beautifulsoup*<br>5. *사용자에게 아티클 정보 제공, django channels*<br><br>*<퀴즈 생성>*<br>1. *아티클 선정*<br>2. *객관식, 서술형 문제 & 답안 생성, gpt-4o-mini*<br>3. *사용자에게 퀴즈 출제 & 사용자 답안 제출, django channels*<br>4. *객관식, 서술형 채점, gpt-4o-mini*<br>5. *사용자에게 채점 결과 반환, django channels*<br><br>*<배틀>*<br>1. *사용자 1:1 매칭, redis*<br>2. *추천 아티클 기반 퀴즈 풀이, django channels*<br>3. *배틀 결과 정보 반환, django channels*<br>|
| (3) 주요엔진 및 기능 설계 | **GPT API (OpenAI)**: 기사의 주요 내용 요약 및 적절 기사 추천, 퀴즈 3문제 생성, 모범 답안 생성 및 서술형 점수 부여하는데 사용하며, AI에게 명확한 지시사항을 제공하여 원하는 출력값을 유도하는 instruction-base-prompting기법을 기반으로 구현함<br> **WebSocket (Django Channels)**: 메세지 전송을 위한 위한 실시간 통신 제공 모듈로, 채팅형 퀴즈 형식을 구현하기 위해 사용<br> **Redis**: 동시 접속 중인 사용자 *두 명*을 1:1 매칭시키기 위해 사용<br> <br> *Quizflow의 Quizroom, Ranking, Battleroom 기능의 구현을 위하여 GPT-4o Mini 모델과 Django, Redis, Google Search API, BeautifulSoup, Django Channels 등을 도입하였고, 기능별로 다음과 같은 모듈을 설계·구현하였다.* <br><br> *1. Quizroom 기능 구현* <br>-***키워드 추출 모듈**: 사용자 피드백 기반 GPT 키워드 생성* <br>*사용자 입력 피드백 기반 아티클 검색을 위한 최적의 키워드 생성을 GPT-4o Mini에 요청하 여 구현하였다. 이때, 최신 피드백을 우선적으로 반영하고, 과거 피드백 내용도 함께 고려하여 키워드를 추출하도록 프롬프트를 구성하였다*<br>-***아티클 추천 모듈**: Google Search API + 신뢰 언론 태그 기반 검색, 중복 제거* <br>*신뢰할 수 있는 언론사별 기사 추출용 태그 정보 리스트를 직접 정리한 후, 이를 활용하여 추 출된 키워드와 함께 Google Search JSON API를 통해 후보 기사 목록을 요청한다. 요청된 목록에서 UserArticleHistory 모델을 사용해 과거 추천된 아티클과의 중복을 제거하고, 최종 추천 기사는 GPT-4o Mini를 통해 사용자 피드백을 반영하여 선정한다. 이 과정에서 최신 피 드백을 우선적으로 고려하고, 제목과 설명을 기반으로 아티클의 적합성을 판단하며, 지식적이 고 학습에 도움이 되는 기사를 추천하도록 구성된 프롬프트를 활용한다.* <br> -***요약 모듈**: BeautifulSoup으로 본문 수집, GPT 요약*<br> *추천된 아티클의 본문은 BeautifulSoup을 이용해 스크래핑한 후, GPT-4o Mini를 통해 핵심 맥락을 유지한 본문 요약을 요청하고, 응답받은 요약 본문과 아티클 정보를 Article 모델에 저장하여 사용자에게 제공한다.*<br> -***객관식 문제 생성 모듈**: 5지선다형 문제 2개 + 정답 추출*<br> *요약된 아티클 본문을 기반으로 GPT-4o Mini를 활용해 5지 선다형 객관식 문제 2개와 해당 정답을 생성하였다. 문제 간 맥락 중복을 방지하기 위해, 첫 번째 문제를 생성한 뒤 두 번째 문제 생성 시에는 이전 문제 내용을 함께 전달하여 완전히 다른 질문이 생성되도록 유도하는 프롬프트를 사용하였다. 각 문제에 대해서는 GPT-4o Mini를 통해 정답 번호만 숫자로 추출 하도록 유도하는 별도의 프롬프트를 구성하였다. 이렇게 생성된 문제와 정답은 MultipleChoiceQuiz 모델에 저장되어 사용자에게 제공된다.*<br> -***서술형 문제 생성 모듈**: 2문장 내외의 핵심 주제 문제 및 정답 생성* <br>*요약된 아티클 본문을 기반으로 GPT-4o Mini를 활용해 서술형 문제와 모범 답안을 생성하였 다. 문제 생성에는 아티클의 핵심 주제를 요약하도록 유도하는 프롬프트를 사용하여, 객관적 이고 사실에 기반한 1개의 서술형 문제가 생성되도록 유도하였다. 이어지는 모범 답안 생성에 는 문제와 아티클 내용을 모두 고려하여 2줄 분량의 요약형 정답을 작성하도록 유도하는 별도 의 프롬프트를 사용하였다. 각 생성 결과는 SubjectiveQuiz 모델에 저장되어 사용자에게 제 공된다.*<br> -***객관식 채점 모듈**: 객관식(2점)* <br>*사용자의 응답을 MultipleChoiceQuiz 모델에 저장된 정답 필드와 비교하여 정답을 판별하며, 정답일 경우 해당 퀴즈가 속한 QuizRoom 모델에 2점을 부여한다.* <br>-***서술형 채점 모듈**: (총 6점, GPT 채점 기준)* <br>*사용자의 응답은 SubjectiveQuiz 모델에 저장된 모범 답안과 비교하여, GPT-4o Mini를 활용 해 5가지 기준에 따라 자동 채점되도록 구성하였다. 5가지 채점 기준은 핵심 내용 포함 여부 (2점), 키워드 사용 여부 (1점), 왜곡 없는 내용 표현 (1점), 2문장 이내 작성 여부 (1점),사실 과 다른 내용 포함 여부 (1점)으로 구성되며, 총점은 6점이다. 채점을 통해 받은 점수를 해당 퀴즈가 속한 QuizRoom 모델에 부여한다.* <br> -***채팅형 퀴즈 구조 모듈**: WebSocket 기반 실시간 메시지* <br>*기존 Django는 기본적으로 WSGI(Web Server Gateway Interface) 기반으로 동작하여 동기 요청만 처리할 수 있기 때문에, 실시간 통신(WebSocket)과 같은 비동기 기능을 지원하지 못 한다. 이를 해결하기 위해 본 프로젝트에서는 Django Channels를 도입하고, Django 서버를 WSGI에서 ASGI(Application Server Gateway Interface) 기반으로 전환하였다. ASGI는 Django가 비동기 요청을 처리할 수 있게 해주는 서버 인터페이스로, WebSocket을 통한 실 시간 상호작용을 가능하게 해준다. 따라서 본 프로젝트에서는 실시간 채팅형 퀴즈 기능과 유 저 간 실시간 상호작용을 구현할 수 있었다. 이 구조를 통해 퀴즈 진행 중 GPT 응답을 대화 형 메시지로 실시간 주고받을 수 있도록 구현함* <br> -***생성 제한 모듈:** Quizroom 1일 3회 제한* <br>*사용자의 일일 Quizroom 생성&진행 횟수를 (최대 3개) 초과 시 채팅 연결을 종료하고, 사용 자에게 제한 알림 메시지를 전송한다.* <br>-***퀴즈 내역 조회 모듈*** <br>*Quizroom에서 오간 모든 메시지를 QuizroomMessage 모델에 저장하고, 요청 시 진행 내역 을 조회할 수 있도록 함.* <br><br> *2. Ranking 기능 구현*<br> -***score 초기화 모듈:** Django Custom Command로 매월 1일 점수 초기화* <br>*Django Command는 Django 프로젝트 내에서 커스텀 명령어를 정의하고 실행할 수 있는 Django 프레임워크의 내장 기능이다. 이를 활용하여 모든 사용자 Profile 모델 객체의 점수를 0으로 초기화하는 명령어를 정의하고, 해당 명령어가 매월 1일 자동으로 실행되도록 시간 기 반 트리거를 설정한다.* <br>-***일일 score 집계 모듈**: 당일 완료된 퀴즈 기준으로 점수 계산* <br>*접속일을 기준으로 당일 완료된 Quizroom 및 Battleroom 객체를 조회하고, 해당 객체들의 점수 집계하여 일일 score를 계산한다.* <br> -***백분위 계산 모듈**<br>전체 사용자 대비 현재 사용자의 ranking score 백분위를 계산하여 제공한다<br>-**랭킹 보드 모듈**<br>상위 10명 사용자 정보를 ranking score 기준으로 조회하여 동점자는 동일 순위로, 전체 순 위는 연속적으로 표기한다.<br><br> *3. Battleroom 기능 구현* <br> -***매칭 모듈**: Redis 리스트 기반 1:1 매칭, 중복 요청 방지* <br>매칭 모듈은 Redis의 리스트 자료형을 큐처럼 활용하여 1:1 배틀 매칭을 처리한다. 사용자가 매칭을 요청하면 해당 사용자의 ID가 대기열에 추가되고, 요청 순서대로 2명이 매칭이 이루어 진다. 1:1 매칭 성공 시, Battleroom 모델을 생성하고 매칭 성공 메시지를 사용자들에게 전송 한다. 또한, 대기열에 이미 사용자가 있는지 확인하여 중복 요청을 방지하고, 사용자는 언제든 지 매칭을 취소할 수 있어 유연한 매칭 시스템을 제공한다.<br> -***랜덤 기사 추천 모듈**: Google Search + GPT를 통한 기사 선정* <br>신뢰할 수 있는 언론사별 기사 추출용 태그 정보 리스트를 직접 정리한 후, 이를 활용하여 랜 덤 키워드와 함께 Google Search JSON API를 통해 후보 기사 목록을 요청한다. 최종 추천 기사는 GPT-4o Mini를 통해 기사를 선정한다. 이 과정에서 랜덤 키워드를 고려하고, 제목과 설명을 기반으로 아티클의 적합성을 판단하며, 지식적이고 학습에 도움이 되는 기사를 추천하 도록 구성된 프롬프트를 활용한다. 추천된 아티클의 본문은 BeautifulSoup을 이용해 스크래 핑한 후, GPT-4o Mini를 통해 핵심 맥락을 유지한 본문 요약을 요청하고, 응답받은 요약 본 문과 아티클 정보를 BattleArticle 모델에 저장하여 두 사용자에게 제공한다.<br> -***객관식 문제 생성 모듈**: 문제 간 중복 제거 및 정답 추출*<br>요약된 아티클 본문을 기반으로 GPT-4o Mini를 활용해 5지 선다형 객관식 문제 2개와 해당 정답을 생성하였다. 문제 간 맥락 중복을 방지하기 위해, 첫 번째 문제를 생성한 뒤 두 번째 문제 생성 시에는 이전 문제 내용을 함께 전달하여 완전히 다른 질문이 생성되도록 유도하는 프롬프트를 사용하였다. 각 문제에 대해서는 GPT-4o Mini를 통해 정답 번호만 숫자로 추출 하도록 유도하는 별도의 프롬프트를 구성하였다. 이렇게 생성된 문제와 정답은 BattleQuiz 모 델에 저장되어 사용자에게 제공된다.<br> -***서술형 문제 생성 모듈**: 핵심 주제 기반 서술형 문제 및 정답 생성 <br>요약된 아티클 본문을 기반으로 GPT-4o Mini를 활용해 서술형 문제와 모범 답안을 생성하였 다. 문제 생성에는 아티클의 핵심 주제를 요약하도록 유도하는 프롬프트를 사용하여, 객관적 이고 사실에 기반한 1개의 서술형 문제가 생성되도록 유도하였다. 이어지는 모범 답안 생성에 는 문제와 아티클 내용을 모두 고려하여 2줄 분량의 요약형 정답을 작성하도록 유도하는 별도 의 프롬프트를 사용하였다. 각 생성 결과는 BattleQuiz 모델에 저장되어 사용자에게 제공된 다.<br> -***객관식 채점 모듈***: 객관식 2점*<br>사용자의 응답을 BattleQuiz 모델에 저장된 정답 필드와 비교하여 정답을 판별하며, 정답일 경우 해당 퀴즈가 속한 BattleRoom 모델의 해당 사용자의 점수 필드에 2점을 부여한다.<br> -***서술형 채점 모듈*** :6점 기준 GPT 채점 <br>사용자의 응답은 BattleQuiz 모델에 저장된 모범 답안과 비교하여, GPT-4o Mini를 활용해 5 가지 기준에 따라 자동 채점되도록 구성하였다. 5가지 채점 기준은 핵심 내용 포함 여부 (2 점), 키워드 사용 여부 (1점), 왜곡 없는 내용 표현 (1점), 2문장 이내 작성 여부 (1점),사실과 다른 내용 포함 여부 (1점)으로 구성되며, 총점은 6점이다. 채점을 통해 받은 점수를 해당 퀴 즈가 속한 BattleRoom 모델의 해당 사용자의 점수 필드에 부여한다<br> -***결과 조회 모듈****: 승패 판단 및 결과 제공 <br>종료된(is_ended=True) BattleRoom의 total_score_1과 total_score_2 필드를 비교하여 배 틀의 승패 여부를 조회할 수 있도록 한다.<br> -***실시간 팝업 메시지 모듈**: 상대 종료 여부 감지 후 실시간 알림* <br>*배틀 퀴즈 동안 정기적으로 상대방의 퀴즈 종료 여부를 파악하여, 상대방이 먼저 배틀 퀴즈를 종료하면 사용자에게 팝업 메시지로 실시간 알림을 전송한다.* <br> -***생성 제한 모듈**: Battleroom 1일 1회 제한* <br>*사용자의 일일 Battleroom 생성 횟수를 (최대 1개) 초과 시 매칭 대기 요청을 거부하고, 사용 자에게 제한 알림 메시지를 전송한다.*<br> -***채팅형 퀴즈 구조 모듈**: Redis Channel Layer 기반 그룹 메시지 중계 및 WebSocket 연결 유지*<br>*기존 Django는 기본적으로 WSGI(Web Server Gateway Interface) 기반으로 동작하여 동기 요청만 처리할 수 있기 때문에, 실시간 통신(WebSocket)과 같은 비동기 기능을 지원하지 못 한다. 이를 해결하기 위해 본 프로젝트에서는 Django Channels를 도입하고, Django 서버를 WSGI에서 ASGI(Application Server Gateway Interface) 기반으로 전환하였다. ASGI는 Django가 비동기 요청을 처리할 수 있게 해주는 서버 인터페이스로, WebSocket을 통한 실 시간 상호작용을 가능하게 해준다. 따라서 본 프로젝트에서는 실시간 채팅형 퀴즈 기능과 유 저 간 실시간 상호작용을 구현할 수 있었다. 이 구조를 통해 퀴즈 진행 중 GPT 응답을 대화 형 메시지로 실시간 주고받을 수 있도록 구현하였다. 또한 배틀의 채팅형 퀴즈 구조에서는 Redis Channel Layer를 기반으로 1:1 매칭된 두 사용 자가 동일한 채팅룸을 공유하도록 구현하였다. Redis는 각 사용자가 보내는 메시지를 빠르게 중계하며, 사용자는 WebSocket을 통해 서버와 실시간으로 연결된다. 이를 통해 두 사용자는 동일한 채팅룸을 공유하면서 빠르고 안정적인 실시간 상호작용이 가능하도록 구현하였다.* <br><br> *4. User 기능 구현* <br> -***회원가입 모듈**: 사용자 정보를 바탕으로 회원가입 처리 후, Token 생성*<br>-***로그인 모듈**: 사용자 인증 후, 식별 번호와 토큰 반환*<br>-***회원 삭제 모듈**: 로그인된 사용자의 Profile과 User 모델 객체 삭제*<br>-***프로필 수정 모듈**: 로그인된 사용자의 입력 정보에 맞게 Profile과 User 모델을 수정*<br>-***프로필 조회 모듈**: 회원 식별 번호로 프로필 정보 조회 및 반환* <br>|
| (4) 주요 기능의 구현 | **1. 관심 키워드 기반 아티클 추천 기능**<br>관심 키워드 기반 아티클 추천 기능은 크게 세 가지 단계를 거쳐 구현된다.<br>먼저, 사용자가 관심사에 대해 간단히 입력하면, OpenAI를 통해 해당 입력과 관련된 키워드를 추출된다. 이때, *키워드 추출 모듈을 활용하여* 이전에 추출된 키워드가 있다면 이를 포함하여 새로운 키워드를 추출함으로써 사용자의 관심 분야를 확장하는 방식으로 키워드 목록을 갱신한다. <br><img src="https://github.com/dear-yy/CapstoneDesignProject/blob/main/image/keyword_extract_prompt.png" width="80%" /><br>이후, *아티클 추천 모듈을 이용하여* 키워드 기반 기사 검색을 위해 미리 신뢰할 수 있는 언론사 목록을 작성하고, Custom Search JSON API를 사용하여 키워드와 언론사 정보를 바탕으로 쿼리를 구성하여 관련 기사 리스트를 추출한다.<br>마지막으로, 추출된 기사 목록과 사용자 입력을 활용하여 OpenAI를 통해 사용자 관심사와 퀴즈 출제에 가장 적합한 기사를 선정할 수 있도록 Instruction-based Prompting 기법을 활용해 기사를 추천하도록 요청한다. 이 과정을 통해 사용자는 자신의 관심에 맞는 기사들을 추천받을 수 있게 된다.<br><img src="https://github.com/dear-yy/CapstoneDesignProject/blob/main/image/article_recommend_prompt.png" width="80%" /><br>- 사용 기술: GPT-4o-mini, Custom Search JSON API <br><br>**2. 퀴즈와 서술형 퀴즈 피드백 생성**<br>퀴즈와 서술형 퀴즈 피드백 생성을 위해서는 아티클 스크래핑, 아티클 기반 퀴즈와 서술형 피드백 생성 과정을 거친다.<br>먼저 아티클을 스크래핑하기 전에 각 언론사의 도메인과 본문을 찾을 태그 및 클래스를 미리 매핑하여 SITE_CLASS_MAPPING 리스트를 작성한다.그 후, 최종 선택된 아티클을 기반으로 매핑 정보를 활용해 requests를 사용하여 HTML을 요청하고, BeautifulSoup으로 파싱하여 본문을 추출한다. 본문을 추출할 때는 텍스트 요소를 찾아 줄바꿈을 포함한 본문을 반환하며, 오류가 발생하면 None을 반환하도록 한다.<br>아티클 기반 퀴즈와 서술형 피드백 생성을 OpenAI로 처리하기 위해, 스크래핑을 통해 추출된 본문 텍스트를 OpenAI의 프롬프트에 적합한 크기와 형태로 가공해야 한다. 이를 위해 텍스트 분할 함수와 아티클 *요약 모듈*를 사용하여 텍스트를 가공한다. 이후, 가공된 아티클 본문을 프롬프트에 포함시켜 Instruction-based Prompting 기법으로 아티클 기반 퀴즈와 서술형 피드백 생성을 요청하는 프롬프트를 구성한다. 다음 프롬프트로 OpenAI에게 아티클 기반 퀴즈와 서술형 피드백 생성을 요청하고, 요청 결과로 받은 퀴즈와 피드백 정보를 파싱하여 사용자에게 제공한다.<br><img src="https://github.com/dear-yy/CapstoneDesignProject/blob/main/image/descriptive_answer_prompt.png" width="80%"/> <br>- 사용 기술: GPT-4o-mini, BeautifulSoup<br><br>**3. 퀴즈봇 형식의 퀴즈 출제**<br> Django Channels를 이용한 실시간 WebSocket 통신을 구현하였다. 먼저, 실시간 통신을 위해 ASGI를 설정하여 WebSocket을 처리할 수 있도록 환경을 설정하고, URL 라우팅을 처리하였다. 이후, 클라이언트와의 통신을 위한 Consumer 클래스를 작성하여 웹소켓 연결과 채팅 형식의 실시간 퀴즈 데이터와 응답 메세지 처리를 구현하였다.<br><img src="https://github.com/dear-yy/CapstoneDesignProject/blob/main/image/quizroom_UI.png" width="200"><br>- 사용 기술: Django-channels, Redis<br><br>**4. 배틀 매칭**<br>경쟁 모드는 실시간 퀴즈 배틀 기능으로 Redis의 Queue 기능을 사용하여, 대기열에 추가된 접속 중인 사용자 두 명을 1:1로 매칭 시켜 배틀방을 생성하면서 시작한다. *매칭 모듈을 이용하여* 두 사용자가 동시에 배틀룸에 접속한 상태에서 배틀룸의 아티클과 퀴즈를 준비하고, 추천이 완료된 아티클 정보를 Django Channels의 group 메세지를 통해 두 사용자에게 동시에 전송한다. 이후 두 사용자에게 전송한 아티클 기반으로 생성된 동일한 퀴즈 3개를 제공하여 제한 시간 내에 더 높은 점수를 획득한 사용자가 이기는 게임 형식의 기능이다.<br><img src="https://github.com/dear-yy/CapstoneDesignProject/blob/main/image/battle_match_code.png" width="80%"><br>- 사용 기술: Django-channels, Redis<br><br>***5. 랭킹***<br>*랭킹 기능은 매월 사용자들의 ranking_score를 0으로 초기화하는 score 초기화 모듈을 사용하며, 사용자들의 퀴즈 및 배틀 결과를 기반으로 일일 점수, 월별 백분위 정보, 전체 사용자 순위 보드를 제공하는 기능을 포함한다. 사용자가 Quizroom 또는 Battleroom에서 문제를 완료하면 일일 score 집계 모듈에 의해 결과에 따라 점수가 집계되어 ranking_score 필드에 반영된다. 이 점수는 매월 1일 자동 초기화를 위해 Django 커맨드로 초기화 명령어를 정의하고, 시간 기반 트리거를 설정하여 실행되도록 구성하였다. 일일 점수, 백분위 정보, 전체 순위 보드는 랭킹 보드 모듈과 백분위 계산 모듈에 의해 에 의해 사용자의 Quizroom, Battleroom, Profile 모델 객체에서 집계한 점수를 기반으로 각 형식에 맞춰 처리하여 제공된다*<br><br>|
| (5) 구현 중 발생한 문제점 |아티클 하나가 선정되어 사용자에게 제시되기까지 오랜 시간이 걸린다. <br> 아티클 추천 과정에서 정치적 또는 상업적 편향을 완전히 배제하는 것이 어렵다. <br>퀴즈 난이도 자동 조절 기능의 부재가 있다. 사용자가 기존에 가지고 있는 지식 수준을 파악하지 않기 때문에 키워드의 다양성과 맞춤형 분야로 학습은 가능하지만, 그의 난이도는 반영하지 않는다. <br>
| (6) Evaluation | | 항목                                                                                                                               | 기준                    | 방식                                                                                                    | 내용/결과                                                                                         |
| -------------------------------------------------------------------------------------------------------------------------------- | --------------------- | ----------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------- |
| **1. 사용자 피드백과 GPT 생성 키워드 비교**<br>*(사용자가 입력한 키워드에 대해 GPT가 생성한 확장 키워드가 실제로 얼마나 적절하게 느껴졌는지를 사용자 피드백을 통해 평가함. 개인화 및 주제 확장 품질 확인 목적)* | GPT가 생성한 키워드의 사용자 수용도 | - 사용자 입력 키워드 기반 GPT 키워드 30세트 생성<br>- 각 세트에 대해 사용자에게 "연관성 있음/보통/없음" 평가 수집 (3점 척도)<br>- 30건 이상 평균 점수 계산 | 평균 사용자 평가 점수: **2.6 / 3.0**<br>→ GPT 생성 키워드는 대부분의 경우 사용자 주제와 연관성이 있다고 평가되었으며, 주제 확장 품질이 우수한 편 |
| **2. 아티클 추천 정확도**<br>*(GPT가 생성한 키워드에 대해 추천된 아티클이 실제로 주제에 적절한지 판단함. 콘텐츠 추천 신뢰성 확보 목적)*                                            | 키워드와 추천 아티클 간의 관련성    | - GPT 생성 키워드 30개 무작위 선택<br>- 각각에 대해 추천된 아티클 수집<br>- 아티클 제목 및 본문 요약과 키워드 간의 관련도를 전문가 2인에게 평가받음 (5점 척도) | 평균 관련도 점수: **4.1 / 5.0**<br>→ 대부분의 아티클이 키워드 주제와 높은 관련도를 보였으며, 추천 정확도가 양호한 편                   |
| **3. 응답 속도**<br>*(사용자 경험에 직접적인 영향을 미치는 시스템 응답 속도를 정량적으로 평가함)*                                                                    | 요청 → 응답 완료까지 걸리는 시간   | - 퀴즈 생성 및 아티클 추천 포함 총 30회 요청 수행<br>- 각 요청에 대해 응답 완료까지 소요 시간(ms)을 측정<br>- 평균 응답 시간 계산                  | 평균 응답 시간: **2.4초**<br>→ 대부분 요청이 3초 이내에 처리되며, 실시간 서비스 기준에서 원활한 응답 성능 확보                        |
**평가 결론**<br> 본 프로젝트는 비독서자를 주요 타겟으로 하여, GPT를 활용해 키워드 기반 아티클 추천과 퀴즈 생성을 제공하는 Quizflow 서비스를 구현하고, 실혐적으로 그 성능을 평가하였다.<br> Quizflow는 개인의 흥미 기반으로 교양 지식을 제공하고자 하는 기획 의도에 부합하는 결과를 도출했으며, GPT 기반 콘텐츠 추천 및 퀴즈 생성이 실제 학습 도구로서의 가능성을 지닌다는 것을 실험적으로 검증하였다. <br><br>**향후 계획**<br>향후에는 키워드 분류 정확도 향상, 사용자 수준별 개인화 추천 고도화, 실제 학습 성과에 대한 장기적 측정 등을 통해 Quizflow의 서비스 완성도를 높이고자 한다.


<br>

